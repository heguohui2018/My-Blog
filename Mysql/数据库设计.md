# 数据库设计

## 需求分析
需求分析一般分为几步走：

 

1.    获取需求：了解所有用户类型，包括潜在用户类型，以确定整体目标和方向

       a） 对用户进行访谈和调研，对各个角色的需求进行归纳整理分析

       b）业务需求，模拟业务场景，对业务逻辑业务流程进行梳理，整理出业务需求

 

2.    分析需求： 

      a）根据业务逻辑和业务流程画出流程图，分析需求以及业务走向（数据流图DFD:Data flow Define，实体关系图ERD，用户用例use case）

       b）挖掘每个需求点的产生原因（知道为什么，）

       c）挖掘每个需求点的隐含需求

       d）挖掘每个需求的必要性

3.    需求确认： 整理分析阶段的所有需求，确保需求一致
       a）整理不清晰的需求

       b）分别将以上需求点与对应用户进行确认，保证需求的一致性和清晰性

4.    编写需求文档：使用自然语言，通俗易懂的方式展现，可以添加图形来增强阅读力
      a）应该包含功能需求和非功能需求
      b）最好把原始需求加入到需求文档中，单独列出一章节


## 功能模块

后台管理员
网站用户
新闻栏目
新闻信息
新闻评论
新闻收藏

## 整体设计


| 表名称       | 说明             |
| :----------: | :-----------:    |
| admin        | 管理员信息表     |
| user_info    | 用户表           |
| news_list    | 新闻栏目（分类） |
| news_info    | 信息表           |
| news_comment | 新闻评论         |
| news_collect | 收藏             |


## 管理员信息表

admin

| 列名         | 数据类型      | 约束         | 说明                     |
| :----------: | :-----------: | :----------: | :-----------:            |
| id           | int           | 非空唯一     | 主键                     |
| username     | vachar(20)    | 非空唯一     | 用户名                   |
| password     | vachar(20)    | 非空         | 密码                     |
| mobile       | vachar(11)    | 非空         | 手机号(管理员)           |
| email        |               | 非空         | 邮箱                     |
| enabed       | vachar(1)     | 非空         | Y(启用),N(禁用),默认启用 |


## 用户信息表

user_info

| 列名         | 数据类型      | 约束         | 说明                     |
| :----------: | :-----------: | :----------: | :-----------:            |
| id           | int           | 非空唯一     | 主键                     |
| username     | vachar(20)    | 非空唯一     | 用户名                   |
| password     | vachar(50)    | 非空         | 密码                     |
| mobile       | vachar(11)    | 非空         | 手机号(用户)             |
| email        |               | 非空         | 邮箱                     |
| avatr        | vachar(255)   | 非空         | 用户头像                 |
| locked       | vachar(1)     | 非空         | Y(锁定),N(正常),默认正常 |


## 新闻栏目

news_list

| 列名         | 数据类型      | 约束         | 说明                     |
| :----------: | :-----------: | :----------: | :-----------:            |
| id           | int           | 非空唯一     | 主键                     |
| name         | vachar(20)    | 非空唯一     | 新闻栏目名称             |
| desc         | vachar(50)    |              | 栏目描述                 |



## 新闻信息表

news_info

| 列名         | 数据类型      | 约束         | 说明                                |
| :----------: | :-----------: | :----------: | :-----------:                       |
| id           | bigint        | 非空唯一     | 主键                                |
| column_id    | int           | 非空唯一     | 外键 栏目id                         |
| admin_id     | int           | 非空         | 外键 管理员id                       |
| title        | vachar(255)   | 非空         | 新闻标题                            |
| content      | text          | 非空         | 新闻内容                            |
| img          | varchar(255)  |              | 新闻封面图片                        |
| author       | varchar(10)   |              | 新闻作者                            |
| source       | varchar(50)   |              | 新闻来源                            |
| collection   | bigint        | 非空         | 新闻收藏量                          |
| pageviews    | bigint        | 非空         | 新闻浏览量                          |
| status       | int           | 非空         | 发布状态，0未发布，1已发布 ,2已下线 |
| publish_time | timestamp     |              | 新闻发布时间                        |
| offline_time | timestamp     |              | 新闻下线时间                        |
| creat_time   | timestamp     | 非空         | 新闻创建时间                        |

## 新闻评论表

news_comment

新闻评论表的特点：某个用户对新闻进行评论，其他用户也可以对用户的评论进行评论

设计方案：

	一：采用两个表进行设计，一个是新闻评论表，另一个用户回复表
	
	二：采用父子表的设计

| 列名         | 数据类型      | 约束         | 说明                     |
| :----------: | :-----------: | :----------: | :-----------:            |
| id           | int           | 非空唯一     | 主键                     |
| news_id      | int           | 非空         | 新闻id                   |
| user_id      | int           | 非空         | 用户id                   |
| parent_id    | int           |              | 指向上级评论的id         |
| content      | text          | 非空         | 评论内容                 |
| creat_time   | timestamp     | 非空         | 创建时间                 |

## 用户收藏表

news_collect

| 列名         | 数据类型      | 约束         | 说明                     |
| :----------: | :-----------: | :----------: | :-----------:            |
| id           | int           | 非空唯一     | 主键                     |
| news_id      | int           | 非空         | 新闻id                   |
| user_id      | int           | 非空         | 用户id                   |








